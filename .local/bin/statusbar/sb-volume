#!/bin/sh
# Prints the current volume.

case $BLOCK_BUTTON in
    1) amixer -q set Master toggle && pkill -RTMIN+3 dwmblocks;;
    3) setsid -f "$TERMINAL" -e "$EDITOR" "$0";;
    4) amixer -q set Master 5%+ && pkill -RTMIN+3 dwmblocks;;
    5) amixer -q set Master 5%- && pkill -RTMIN+3 dwmblocks;;
esac

volinfo=$(amixer get Master | tail -n 1 | tr -d '[]%'| cut -d ' ' -f 6,8)
vol=$(echo $volinfo | cut -d ' ' -f 1)
case $volinfo in
    *off) 
        printf "^b#d3869b^^c#282828^   ^d^^b#a89984^^c#282828^ OFF ^d^" && exit;;
    *on) 
        if [ "$vol" -gt "50" ]; then
            icon=""
        elif [ "$vol" -gt "15" ]; then
            icon=""
        elif [ "$vol" -gt "0" ]; then
            icon=""
        else
            printf "^b#d3869b^^c#282828^   ^d^^b#a89984^^c#282828^ OFF ^d^" && exit
        fi;;
esac
printf "^b#d3869b^^c#282828^ $icon  ^d^^b#a89984^^c#282828^ $vol%% ^d^"
