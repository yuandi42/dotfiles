#!/bin/sh
# Prints the current volume.

case $BLOCK_BUTTON in
    1) amixer -q set Master toggle && pkill -RTMIN+3 dwmblocks;;
    3) "$TERMINAL" -e "$EDITOR" "$0";; 
    4) amixer -q set Master 5%+ && pkill -RTMIN+3 dwmblocks;;
    5) amixer -q set Master 5%- && pkill -RTMIN+3 dwmblocks;;
esac

volinfo=$(amixer get Master | tail -n 1 | tr -d '[]%'| cut -d ' ' -f 6,8)
vol=$(echo $volinfo | cut -d ' ' -f 1)
case $volinfo in
    *off) echo " OFF " && exit ;;
    *on) 
        if [ "$vol" -gt "55" ]; then
            icon=""
        elif [ "$vol" -gt "25" ]; then
            icon=""
        elif [ "$vol" -gt "0" ]; then
            icon=""
        else
                echo " OFF " && exit
        fi;;
esac
printf "^c#d3869b^$icon $vol%%^d^"
