#!/usr/bin/sh
# show mpd status. WIP
# SIGNAL 15

color=#427b58
desc='------'
if [ $(pidof mpd) ]; then 
    case $BLOCK_BUTTON in
        1) mpc -q toggle;; # toggle mpd
        2) mpdnoti;; # send notification
        3) xsetroot -name "fsignal:2";; # toggle musicpad
        4) mpc -q prev;; # scroll up, previous
        5) mpc -q next;; # scroll down, next
    esac
    stt=$(mpc status '%state%')
    case $stt in
        *pause*) desc='PAUSED';;
        *play*)  desc='PLAYING';;
    esac
    # pidof -x sb-mpdup || setsid -f sb-mpdup # why doesn't setsid -f work?
else 
    case $BLOCK_BUTTON in
        1) mpd;;
        3) setsid -f "$TERMINAL" -e "$EDITOR" "$0";; 
    esac
    desc="NO MPD"
fi
sb-show $color ï¢† "$desc"
